
<h1 class="sectionedit1" id="privilege_escalation">Privilege Escalation</h1>
<div class="level1">

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Privilege Escalation&quot;,&quot;hid&quot;:&quot;privilege_escalation&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:1,&quot;range&quot;:&quot;1-36&quot;} -->
<h2 class="sectionedit2" id="installation">Installation</h2>
<div class="level2">
<ol>
<li class="level1"><div class="li"> Install doas:</p><pre class='cli  '><span class="cli_prompt"># </span><span class="cli_command">apt install doas</span></pre><p></div>
</li>
</ol>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Installation&quot;,&quot;hid&quot;:&quot;installation&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:2,&quot;range&quot;:&quot;37-112&quot;} -->
<h2 class="sectionedit3" id="configuration">Configuration</h2>
<div class="level2">
<ol>
<li class="level1"><div class="li"> Set rules:<dl class="file">
<dt><a href="http://localhost/_export/code/old/mint/privilege_escalation?codeblock=0" title="Download Snippet" class="mediafile mf_conf">/etc/doas.conf</a></dt>
<dd><pre class="code file text">## AUTHOR:       AISK11
## LOCATION:     /etc/doas.conf (0600 root:root)
## DEPENDENCIES: doas
## DESCRIPTION:  Privilege escalation control rules.
&nbsp;
## 1. Replace sudo.
##     $(ln -sf /usr/bin/doas /usr/bin/sudo)
##
## 2. Create admin group and add user to it (user relogin required afterwards).
##     $(groupadd doas)
##     $(usermod -aG doas &lt;USER&gt;)
&nbsp;
## Admin group.
permit :doas
#permit nopass :doas</pre>
</dd></dl>

<pre class='cli  '><span class="cli_prompt"># </span><span class="cli_command">chmod 0600 /etc/doas.conf</span></pre>
</div>
</li>
<li class="level1"><div class="li"> Replace sudo:</p><pre class='cli  '><span class="cli_prompt"># </span><span class="cli_command">ln -sf /usr/bin/doas /usr/bin/sudo </span></pre><p></div>
</li>
<li class="level1"><div class="li"> Create admin group and add user to it (user relogin required afterwards):</p><pre class='cli  '><span class="cli_prompt"># </span><span class="cli_command">groupadd doas</span>
<span class="cli_prompt"># </span><span class="cli_command">usermod -aG doas &lt;USER&gt;</span></pre><p></div>
</li>
</ol>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Configuration&quot;,&quot;hid&quot;:&quot;configuration&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:3,&quot;range&quot;:&quot;113-835&quot;} -->
<h2 class="sectionedit4" id="usage">Usage</h2>
<div class="level2">
<ul>
<li class="level1"><div class="li"> Run command as root:</p><pre class='cli  '><span class="cli_prompt">$ </span><span class="cli_command">doas &lt;COMMAND&gt;</span></pre><p></div>
</li>
</ul>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Usage&quot;,&quot;hid&quot;:&quot;usage&quot;,&quot;codeblockOffset&quot;:1,&quot;secid&quot;:4,&quot;range&quot;:&quot;836-&quot;} -->